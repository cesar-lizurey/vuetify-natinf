(function(d,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(d=typeof globalThis<"u"?globalThis:d||self,e(d.VuetifyNATINF={},d.Vue))})(this,function(d,e){"use strict";const N={"Contravention de 1ère classe":{abr:"C1",couleur:"primary"},"Contravention de 2ème classe":{abr:"C2",couleur:"primary"},"Contravention de 3ème classe":{abr:"C3",couleur:"primary"},"Contravention de 4ème classe":{abr:"C4",couleur:"primary"},"Contravention de 5ème classe":{abr:"C5",couleur:"primary"},Délit:{abr:"D",couleur:"warning"},Crime:{abr:"Cr",couleur:"error"}};async function h(t){try{return(await(await fetch(`https://tabular-api.data.gouv.fr/api/resources/c6fb5b37-b3bc-4904-bd26-1b29ad7391df/data/?Ministère de la Justice, Direction des affaires criminelles et__exact=${t}`,{method:"GET",credentials:"include"})).json()).data[0]||!1}catch{return console.error("NATINF introuvable"),!1}}const _=(t,o)=>{const n=t.__vccOpts||t;for(const[a,r]of o)n[a]=r;return n},T=e.defineComponent({name:"CarteNATINF",props:{natinf:{type:Number,required:!0,default:0}},async setup(t){const{natinf:o}=e.toRefs(t),n=await h(o.value);return{NATINFAffiche:e.computed(()=>{if(n)return{nature:n["Unnamed: 1"]||"",couleur:N[n["Unnamed: 1"]].couleur||"primary",texte:n["Unnamed: 2"]||"INTROUVABLE",prevuPar:n["Unnamed: 3"],reprimePar:n["Unnamed: 4"]}})}}});function F(t,o,n,a,r,m){const i=e.resolveComponent("v-toolbar-title"),c=e.resolveComponent("v-toolbar"),l=e.resolveComponent("v-list-item"),f=e.resolveComponent("v-list"),s=e.resolveComponent("v-divider"),p=e.resolveComponent("v-list-subheader"),u=e.resolveComponent("v-card"),x=e.resolveComponent("v-alert");return t.NATINFAffiche?(e.openBlock(),e.createBlock(u,{key:0,class:"mx-auto bg-surface","max-width":"400"},{default:e.withCtx(()=>[e.createVNode(c,{color:t.NATINFAffiche.couleur},{default:e.withCtx(()=>[e.createVNode(i,null,{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(t.natinf),1)]),_:1})]),_:1},8,["color"]),e.createVNode(f,{lines:"three",class:"mx-auto bg-surface-variant"},{default:e.withCtx(()=>[e.createVNode(l,{title:t.NATINFAffiche.nature,subtitle:t.NATINFAffiche.texte},null,8,["title","subtitle"])]),_:1}),e.createVNode(s),e.createVNode(f,{class:"mx-auto bg-surface-variant"},{default:e.withCtx(()=>[e.createVNode(p,null,{default:e.withCtx(()=>o[0]||(o[0]=[e.createTextVNode("Prévue par")])),_:1}),e.createVNode(l,{lines:"three",subtitle:t.NATINFAffiche.prevuPar},null,8,["subtitle"]),e.createVNode(p,null,{default:e.withCtx(()=>o[1]||(o[1]=[e.createTextVNode("Réprimée par")])),_:1}),e.createVNode(l,{lines:"three",subtitle:t.NATINFAffiche.reprimePar},null,8,["subtitle"])]),_:1})]),_:1})):(e.openBlock(),e.createBlock(x,{key:1,type:"error"},{default:e.withCtx(()=>o[2]||(o[2]=[e.createTextVNode(" NATINF introuvable ")])),_:1}))}const C=_(T,[["render",F]]),I=e.defineComponent({name:"CartoucheNATINF",props:{natinf:{type:Number,required:!0,default:0}},async setup(t){const{natinf:o}=e.toRefs(t),n=e.ref(!1),a=await h(o.value);return{NATINFAffiche:e.computed(()=>{if(a)return{couleur:N[a["Unnamed: 1"]].couleur||"primary",abr:`[${N[a["Unnamed: 1"]].abr}]`||"",texte:`${o.value} ${a["Unnamed: 2"]}`||"INTROUVABLE",prevuPar:a["Unnamed: 3"],reprimePar:a["Unnamed: 4"]}}),menu:n}}});function V(t,o,n,a,r,m){const i=e.resolveComponent("v-btn"),c=e.resolveComponent("v-list-item"),l=e.resolveComponent("v-list"),f=e.resolveComponent("v-card"),s=e.resolveComponent("v-menu"),p=e.resolveComponent("v-chip");return t.NATINFAffiche?(e.openBlock(),e.createBlock(s,{key:0,modelValue:t.menu,"onUpdate:modelValue":o[0]||(o[0]=u=>t.menu=u),"close-on-content-click":!1,location:"end"},{activator:e.withCtx(({props:u})=>[e.createVNode(i,e.mergeProps({size:"x-small",color:t.NATINFAffiche.couleur},u,{class:"ma-2",variant:"outlined"}),{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(t.NATINFAffiche.abr)+" "+e.toDisplayString(t.NATINFAffiche.texte),1)]),_:2},1040,["color"])]),default:e.withCtx(()=>[e.createVNode(f,null,{default:e.withCtx(()=>[e.createVNode(l,{density:"compact"},{default:e.withCtx(()=>[e.createVNode(c,{variant:"tonal",title:"Prévue par"}),e.createVNode(c,{lines:"three",subtitle:t.NATINFAffiche.prevuPar},null,8,["subtitle"]),e.createVNode(c,{variant:"tonal",title:"Réprimée par"}),e.createVNode(c,{lines:"three",subtitle:t.NATINFAffiche.reprimePar},null,8,["subtitle"])]),_:1})]),_:1})]),_:1},8,["modelValue"])):(e.openBlock(),e.createBlock(p,{key:1,color:"error",class:"ma-2","prepend-icon":"mdi-alert",size:"x-small"},{default:e.withCtx(()=>o[1]||(o[1]=[e.createTextVNode(" NATINF introuvable ")])),_:1}))}const b=_(I,[["render",V]]),y="https://tabular-api.data.gouv.fr/api/resources/c6fb5b37-b3bc-4904-bd26-1b29ad7391df/data/?",A={__name:"RechercheNATINF",props:e.mergeModels({multiple:{type:Boolean,default:!1}},{modelValue:{type:Object},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const o=t,{multiple:n}=e.toRefs(o),a=e.useModel(t,"modelValue"),r=e.reactive({resultats:[],aChercher:null,enCours:!1,recherche:null});return e.watch(()=>r.aChercher,m=>{!m||(m==null?void 0:m.length)===0||r.enCours||(clearTimeout(r.recherche),r.recherche=setTimeout(async()=>{r.enCours=!0;let i;const c=parseFloat(m);!isNaN(c)&&isFinite(c)?i="Ministère de la Justice, Direction des affaires criminelles et__exact":i="Unnamed: 2__contains",fetch(`${y}${i}=${m}`,{method:"GET",credentials:"include"}).then(l=>l.json()).then(l=>{r.resultats=[...l.data]}).catch(l=>{console.log(l)}).finally(()=>{r.enCours=!1})},1500))}),(m,i)=>{const c=e.resolveComponent("v-chip"),l=e.resolveComponent("v-list-item"),f=e.resolveComponent("v-autocomplete");return e.openBlock(),e.createBlock(f,{modelValue:a.value,"onUpdate:modelValue":i[0]||(i[0]=s=>a.value=s),search:r.aChercher,"onUpdate:search":i[1]||(i[1]=s=>r.aChercher=s),"no-filter":"","return-object":"",items:r.resultats,loading:r.enCours,"item-title":"nom",label:"Code NATINF ou texte",placeholder:"Commencez à écrire...","prepend-icon":"mdi-scale-balance",multiple:e.unref(n),chips:"","closable-chips":"",clearable:""},{chip:e.withCtx(({props:s,item:p})=>[e.createVNode(c,e.mergeProps(s,{"prepend-icon":"mdi-scale-balance",text:`[${p.raw["Ministère de la Justice, Direction des affaires criminelles et"]}] ${p.raw["Unnamed: 2"]}`}),null,16,["text"])]),item:e.withCtx(({props:s,item:p})=>[e.createVNode(l,e.mergeProps(s,{"prepend-icon":"mdi-scale-balance",title:p.raw["Unnamed: 2"],subtitle:p.raw["Ministère de la Justice, Direction des affaires criminelles et"]}),null,16,["title","subtitle"])]),_:1},8,["modelValue","search","items","loading","multiple"])}}},w={install(t){t.component("CarteNATINF",C),t.component("CartoucheNATINF",b),t.component("RechercheNATINF",A)}};d.CarteNATINF=C,d.CartoucheNATINF=b,d.RechercheNATINF=A,d.default=w,Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
